---
title: 请求代码示例
date: 2023-02-21 23:13:43
permalink: /pages/1705234447153963011/
article: false
---

::: tip 注意 🔔️
没有开发者调用凭证无法调用接口哦！！！ [前往获取开发者凭证](https://api.panyuwen.top/account/center)
:::

## 示例代码开发环境

- java8

- springboot 2.7.2
- apache-maven-3.8.1

## 接口方法名对照表

|       接口名称       |        方法名称         |
| :------------------: | :---------------------: |
|   **获取输入名称**   |    getUsernameByPost    |
| **微博热搜实时榜单** |    getWeiboHotSearch    |
|      **毒鸡汤**      | getPoisonousChickenSoup |
|     **星座运势**     |      getHoroscope       |
|    **获取公网ip**    |       getPublicIp       |
|     **随机壁纸**     |   getRandomWallpaper    |
|   **天气详细信息**   |       getWeather        |
|     **土味情话**     |       getLoveTalk       |

## 代码示例

我们以[星座运势](/pages/1705238841173942274/)为例：

- **示例一 ：推荐 👍**

1. 通过yml配置开发者调用凭证调用

2. 注入Client

   ```java
   @Resource
   private GigotApiClient gigotApiClient;
   ```

3. 找到对应方法，[参考请求接口方法名对照表](/pages/1705234447153963011/#接口方法名对照表)

4. 封装参数，参数列表可见`接口对应api文档`例：[星座运势](/pages/1705238841173942274/)

   ```java
           HoroscopeParams horoscopeParams = new HoroscopeParams();
           horoscopeParams.setType("virgo");
           horoscopeParams.setTime("week");
   ```

5. 调用代码

   ```java
       public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
           HoroscopeResponse horoscopeResponse = null;
           try {
               return gigotApiClient.getHoroscope(horoscopeParams);
           } catch (GigotApiException e) {
               log.error(e.getMessage());
               return null;
           }
       }
   ```

- **完整代码**

   ```java
       @Resource
       private GigotApiClient gigotApiClient;
   
       @Test
       void clientTest(){
           // 1. 封装参数 如没有参数不传
           HoroscopeParams horoscopeParams = new HoroscopeParams();
           horoscopeParams.setType("virgo");
           horoscopeParams.setTime("week");
           // 2.调用自定义方法
           HoroscopeResponse horoscope = getHoroscope(horoscopeParams);
           // 其他业务逻辑
           log.info("horoscope:" + horoscope);
       }
   
       public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
           HoroscopeResponse horoscopeResponse = null;
           try {
               // 3. 调用sdk并返回结果
               return gigotApiClient.getHoroscope(horoscopeParams);
           } catch (GigotApiException e) {
               log.error(e.getMessage());
               return null;
           }
       }
   ```

   


- 示例二：

1. 找到对应方法，[参考请求接口方法名对照表](/pages/1705234447153963011/#接口方法名对照表)

2. 封装参数，参数列表可见`接口对应api文档`例：[星座运势](/pages/1705238841173942274/)

   ```java
       HoroscopeParams horoscopeParams = new HoroscopeParams();
       horoscopeParams.setType("virgo");
       horoscopeParams.setTime("week");
   ```

3. 通过实例化对象的方式传入密钥

   ```java
       GigotApiClient gigotApiClient = new GigotApiClient("您的secretId", "您的secretKey");
   ```

4. 调用代码

   ```java
   public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
       HoroscopeResponse horoscopeResponse = null;
       try {
           // 3. 创建Client示例 并传入密钥
   		GigotApiClient gigotApiClient = new GigotApiClient("您的secretId", "您的secretKey");
           // 4. 调用sdk并返回结果
           return gigotApiClient.getHoroscope(horoscopeParams);
       } catch (GigotApiException e) {
           log.error(e.getMessage());
           return null;
       }
   }
   ```

- **完整代码**

  ```java
  @Test
  void clientTest(){
      // 1. 封装参数 如没有参数不传
      HoroscopeParams horoscopeParams = new HoroscopeParams();
      horoscopeParams.setType("virgo");
      horoscopeParams.setTime("week");
      // 2.调用自定义方法
      HoroscopeResponse horoscope = getHoroscope(horoscopeParams);
      // 其他业务逻辑
      log.info("horoscope:" + horoscope);
  }
  
  public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
      HoroscopeResponse horoscopeResponse = null;
      try {
          // 3. 创建Client示例 并传入密钥
  		GigotApiClient gigotApiClient = new GigotApiClient("您的secretId", "您的secretKey");
          // 4. 调用sdk并返回结果
          return gigotApiClient.getHoroscope(horoscopeParams);
      } catch (GigotApiException e) {
          log.error(e.getMessage());
          return null;
      }
  }
  ```

