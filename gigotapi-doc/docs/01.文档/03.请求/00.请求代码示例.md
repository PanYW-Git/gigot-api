---
title: è¯·æ±‚ä»£ç ç¤ºä¾‹
date: 2023-02-21 23:13:43
permalink: /pages/1705234447153963011/
article: false
---

::: tip æ³¨æ„ ğŸ””ï¸
æ²¡æœ‰å¼€å‘è€…è°ƒç”¨å‡­è¯æ— æ³•è°ƒç”¨æ¥å£å“¦ï¼ï¼ï¼ [å‰å¾€è·å–å¼€å‘è€…å‡­è¯](https://api.panyuwen.top/account/center)
:::

## ç¤ºä¾‹ä»£ç å¼€å‘ç¯å¢ƒ

- java8

- springboot 2.7.2
- apache-maven-3.8.1

## æ¥å£æ–¹æ³•åå¯¹ç…§è¡¨

|       æ¥å£åç§°       |        æ–¹æ³•åç§°         |
| :------------------: | :---------------------: |
|   **è·å–è¾“å…¥åç§°**   |    getUsernameByPost    |
| **å¾®åšçƒ­æœå®æ—¶æ¦œå•** |    getWeiboHotSearch    |
|      **æ¯’é¸¡æ±¤**      | getPoisonousChickenSoup |
|     **æ˜Ÿåº§è¿åŠ¿**     |      getHoroscope       |
|    **è·å–å…¬ç½‘ip**    |       getPublicIp       |
|     **éšæœºå£çº¸**     |   getRandomWallpaper    |
|   **å¤©æ°”è¯¦ç»†ä¿¡æ¯**   |       getWeather        |
|     **åœŸå‘³æƒ…è¯**     |       getLoveTalk       |

## ä»£ç ç¤ºä¾‹

æˆ‘ä»¬ä»¥[æ˜Ÿåº§è¿åŠ¿](/pages/1705238841173942274/)ä¸ºä¾‹ï¼š

- **ç¤ºä¾‹ä¸€ ï¼šæ¨è ğŸ‘**

1. é€šè¿‡ymlé…ç½®å¼€å‘è€…è°ƒç”¨å‡­è¯è°ƒç”¨

2. æ³¨å…¥Client

   ```java
   @Resource
   private GigotApiClient gigotApiClient;
   ```

3. æ‰¾åˆ°å¯¹åº”æ–¹æ³•ï¼Œ[å‚è€ƒè¯·æ±‚æ¥å£æ–¹æ³•åå¯¹ç…§è¡¨](/pages/1705234447153963011/#æ¥å£æ–¹æ³•åå¯¹ç…§è¡¨)

4. å°è£…å‚æ•°ï¼Œå‚æ•°åˆ—è¡¨å¯è§`æ¥å£å¯¹åº”apiæ–‡æ¡£`ä¾‹ï¼š[æ˜Ÿåº§è¿åŠ¿](/pages/1705238841173942274/)

   ```java
           HoroscopeParams horoscopeParams = new HoroscopeParams();
           horoscopeParams.setType("virgo");
           horoscopeParams.setTime("week");
   ```

5. è°ƒç”¨ä»£ç 

   ```java
       public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
           HoroscopeResponse horoscopeResponse = null;
           try {
               return gigotApiClient.getHoroscope(horoscopeParams);
           } catch (GigotApiException e) {
               log.error(e.getMessage());
               return null;
           }
       }
   ```

- **å®Œæ•´ä»£ç **

   ```java
       @Resource
       private GigotApiClient gigotApiClient;
   
       @Test
       void clientTest(){
           // 1. å°è£…å‚æ•° å¦‚æ²¡æœ‰å‚æ•°ä¸ä¼ 
           HoroscopeParams horoscopeParams = new HoroscopeParams();
           horoscopeParams.setType("virgo");
           horoscopeParams.setTime("week");
           // 2.è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•
           HoroscopeResponse horoscope = getHoroscope(horoscopeParams);
           // å…¶ä»–ä¸šåŠ¡é€»è¾‘
           log.info("horoscope:" + horoscope);
       }
   
       public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
           HoroscopeResponse horoscopeResponse = null;
           try {
               // 3. è°ƒç”¨sdkå¹¶è¿”å›ç»“æœ
               return gigotApiClient.getHoroscope(horoscopeParams);
           } catch (GigotApiException e) {
               log.error(e.getMessage());
               return null;
           }
       }
   ```

   


- ç¤ºä¾‹äºŒï¼š

1. æ‰¾åˆ°å¯¹åº”æ–¹æ³•ï¼Œ[å‚è€ƒè¯·æ±‚æ¥å£æ–¹æ³•åå¯¹ç…§è¡¨](/pages/1705234447153963011/#æ¥å£æ–¹æ³•åå¯¹ç…§è¡¨)

2. å°è£…å‚æ•°ï¼Œå‚æ•°åˆ—è¡¨å¯è§`æ¥å£å¯¹åº”apiæ–‡æ¡£`ä¾‹ï¼š[æ˜Ÿåº§è¿åŠ¿](/pages/1705238841173942274/)

   ```java
       HoroscopeParams horoscopeParams = new HoroscopeParams();
       horoscopeParams.setType("virgo");
       horoscopeParams.setTime("week");
   ```

3. é€šè¿‡å®ä¾‹åŒ–å¯¹è±¡çš„æ–¹å¼ä¼ å…¥å¯†é’¥

   ```java
       GigotApiClient gigotApiClient = new GigotApiClient("æ‚¨çš„secretId", "æ‚¨çš„secretKey");
   ```

4. è°ƒç”¨ä»£ç 

   ```java
   public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
       HoroscopeResponse horoscopeResponse = null;
       try {
           // 3. åˆ›å»ºClientç¤ºä¾‹ å¹¶ä¼ å…¥å¯†é’¥
   		GigotApiClient gigotApiClient = new GigotApiClient("æ‚¨çš„secretId", "æ‚¨çš„secretKey");
           // 4. è°ƒç”¨sdkå¹¶è¿”å›ç»“æœ
           return gigotApiClient.getHoroscope(horoscopeParams);
       } catch (GigotApiException e) {
           log.error(e.getMessage());
           return null;
       }
   }
   ```

- **å®Œæ•´ä»£ç **

  ```java
  @Test
  void clientTest(){
      // 1. å°è£…å‚æ•° å¦‚æ²¡æœ‰å‚æ•°ä¸ä¼ 
      HoroscopeParams horoscopeParams = new HoroscopeParams();
      horoscopeParams.setType("virgo");
      horoscopeParams.setTime("week");
      // 2.è°ƒç”¨è‡ªå®šä¹‰æ–¹æ³•
      HoroscopeResponse horoscope = getHoroscope(horoscopeParams);
      // å…¶ä»–ä¸šåŠ¡é€»è¾‘
      log.info("horoscope:" + horoscope);
  }
  
  public HoroscopeResponse getHoroscope(HoroscopeParams horoscopeParams) {
      HoroscopeResponse horoscopeResponse = null;
      try {
          // 3. åˆ›å»ºClientç¤ºä¾‹ å¹¶ä¼ å…¥å¯†é’¥
  		GigotApiClient gigotApiClient = new GigotApiClient("æ‚¨çš„secretId", "æ‚¨çš„secretKey");
          // 4. è°ƒç”¨sdkå¹¶è¿”å›ç»“æœ
          return gigotApiClient.getHoroscope(horoscopeParams);
      } catch (GigotApiException e) {
          log.error(e.getMessage());
          return null;
      }
  }
  ```

